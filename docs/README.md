sstmk-onvif/
├─ cmd/
│  └─ sstmk-onvif/
│     └─ main.go                     # точка входа (парсер флагов, запуск discovery + http-серверов)
├─ internal/
│  ├─ config/
│  │  ├─ config.go                   # парсинг YAML/ENV/UCI, валидация
│  │  └─ defaults.go                 # значения по умолчанию
│  ├─ registry/
│  │  ├─ registry.go                 # модель DevMeta, хранение, индексы, поиск
│  │  └─ load_from_config.go         # сбор реестра из конфигурации
│  ├─ discovery/
│  │  ├─ wsdiscovery.go              # UDP 3702, joinGroup, чтение Probe
│  │  └─ responder.go                # сбор ProbeMatches, чанкование по MTU
│  ├─ httpdev/
│  │  ├─ server.go                   # запуск http.Server per device (порт)
│  │  ├─ handlers.go                 # GetCapabilities/GetServices/GetScopes/GetDeviceInformation
│  │  └─ soap_templates.go           # SOAP-обёртки/шаблоны
│  ├─ events/
│  │  ├─ pullpoint.go                # (позже) CreatePullPointSubscriptionPullMessages
│  │  └─ buffer.go                   # буфер событий/топики
│  ├─ adapters/
│  │  ├─ tcp/
│  │  │  └─ adapter.go               # драйвер для рамки/ручного по TCP
│  │  ├─ udp/
│  │  │  └─ adapter.go               # (если нужно)
│  │  └─ mock/
│  │     └─ adapter.go               # «заглушка» для разработки
│  ├─ logging/
│  │  └─ logger.go                   # единая настройка логов
│  ├─ util/
│  |  ├─ net.go                      # guessLocalIP, helpers
│  |  └─ uuid.go                     # urn:uuid, xmlEscape
│  └─ web/
│     ├─ handlers.go                 # обработка api
│     └─ server.go                   # веб сервер для admin panel
├─ pkg/
│  └─ onvif/
│     └─ constants.go                # неймспейсы, типы, константы
├─ configs/
│  ├─ sstmk-onvif.yml                # основной YAML-конфиг
│  └─ uci/
│     └─ sstmk-onvif                 # /etc/config/sstmk-onvif (альтернативно UCI)
├─ openwrt/
│  ├─ init.d/
│  │  └─ sstmk-onvif                 # /etc/init.d/sstmk-onvif (procd-скрипт)
│  ├─ firewall.rules                 # пример iptables-правил
│  └─ Makefile                       # OpenWrt package (опционально)
├─ scripts/
│  ├─ build-mipsle.sh                # сборка для OpenWrt (mipsle softfloat)
│  ├─ run-local.sh                   # локальный запуск (darwin/linux/amd64)
│  └─ push-to-router.sh              # копирование на роутер + запуск
├─ docs/
│  ├─ README.md
│  ├─ CONFIG.md
│  └─ PROTOCOLS.md                   # описание низкоуровневых протоколов/маппинга
├─ go.mod
└─ go.sum

00 30 30 30 30 30 31 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 47 61 74 65 2D 31 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 45 6E 74 72 61 6E 63 65 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 C0 A8 01 02 B8 0B EF BE AD DE 31 2E 30 2E 30
00 00 00 00 00 61 31 62 32 63 33 64 00 00 00 31
2E 30 00 00 00 00 00 00 00 46 44 43 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 4D 6F 64 65 6C 2D 58
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00

00 30 30 30 30 30 31 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 47 61 74 65 2D 31 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 45 6E 74 72 61 6E 63 65 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 C0 A8 01 02 B8 0B EF BE AD DE 31 2E 30 2E 30
00 00 00 00 00 61 31 62 32 63 33 64 00 00 00 31
2E 30 00 00 00 00 00 00 00 46 44 43 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 4D 6F 64 65 6C 2D 58
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00

00 53 4e 2d 39 39 39 39 39 39 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 4d 61 69 6e 2d 47 61 74 65 2d 4e 6f 72 74 68
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 42 75 73 69 6e 65 73 73 2d 43 65 6e 74 65 72
2d 41 6c 70 68 61 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
00 c0 a8 01 32 b8 0b ef be ad de 31 2e 32 2e 33
00 00 00 00 00 61 31 62 32 63 33 64 00 00 00 72
65 76 5f 32 00 00 00 00 00 53 53 54 4d 4b 2d 43
6f 72 70 00 00 00 00 00 00 00 00 00 00 00 00 00
00 00 00 00 00 00 00 00 00 49 6e 64 75 63 74 69
6f 6e 2d 44 65 74 65 63 74 6f 72 2d 76 31 00 00
00 00 00 00 00 00 00 00 00